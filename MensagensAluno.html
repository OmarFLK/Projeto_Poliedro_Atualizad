<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Mensagens - Aluno</title>

    <!-- CSS externos -->
    <link rel="stylesheet" href="front/Styles/Login.css" />
    <link rel="stylesheet" href="front/Styles/StyleAlunos.css" />
    <link rel="stylesheet" href="front/Styles/MensagensAluno.css" />

    <!-- CSS interno (APENAS o necessário!) -->
    <style>
      /* ícones superiores */
      .top-icons {
        display: flex;
        flex-direction: row;
        align-items: center;
        justify-content: flex-end;
        gap: 8px;
        flex-wrap: nowrap;
      }
      .top-icons img {
        width: 100%;
        height: auto;
        object-fit: contain;
      }
      @media (max-width: 420px) {
        .top-icons {
          gap: 6px;
        }
      }

      /* Menu lateral do mobile */
      .menu-sidebar {
        height: 100%;
        width: 0;
        position: fixed;
        top: 0;
        left: 0;
        background-color: #1a4e9b;
        overflow-x: hidden;
        padding-top: 60px;
        transition: 0.3s;
        z-index: 1000;
        display: flex;
        flex-direction: column;
        gap: 15px;
        pointer-events: none;
      }
      .menu-sidebar.open {
        width: 250px;
        pointer-events: auto;
      }

      .sidebar-link {
        padding: 12px 24px;
        text-decoration: none;
        font-size: 1.2rem;
        color: white;
      }
      .sidebar-link:hover,
      .sidebar-link.active {
        background-color: #6a9bd1;
      }

      .menu-close {
        position: absolute;
        top: 10px;
        right: 20px;
        font-size: 2rem;
        background: none;
        border: none;
        color: white;
        cursor: pointer;
      }

      /* Botão hamburguer */
      .menu-toggle {
        font-size: 2rem;
        background: none;
        border: none;
        color: white;
        cursor: pointer;
        display: none;
      }

      /* Header */
      .header-aluno {
        background-color: #163f7a;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 20px;
        gap: 10px;
      }

      .poliedro-logo-header {
        height: 40px;
        cursor: pointer;
      }

      .header-profile-img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 2px solid white;
        cursor: pointer;
      }

      /* RESPONSIVIDADE CORRIGIDA */
      @media (max-width: 991px) {
        .header-nav {
          display: none !important;
        }
        .menu-toggle {
          display: inline-block;
        }
      }

      @media (min-width: 992px) {
        .menu-toggle {
          display: none;
        }
        /* AQUI ESTAVA O ERRO — agora sidebar aparece no desktop */
        .sidebar {
          display: block !important;
        }
      }
    </style>
  </head>

  <body>
    <header>
      <div class="header-aluno">
        <img src="Assets/poliedro.png" class="poliedro-logo-header" />

        <button id="menu-toggle" class="menu-toggle">&#9776;</button>

        <nav class="header-nav">
          <a href="HomeAluno.html" class="header-link">Home</a>
          <a href="ItinerarioAluno.html" class="header-link">Itinerário</a>
          <a href="AtividadesAluno.html" class="header-link">Atividades</a>
          <a href="NotasAluno.html" class="header-link">Notas</a>
          <a href="MensagensAluno.html" class="header-link active">Mensagens</a>
          <a href="eventosAlunos.html" class="header-link">Eventos</a>
        </nav>

        <a href="PerfilAluno.html">
          <img src="Assets/LogoUsuario.png" class="header-profile-img" />
        </a>
      </div>

      <!-- Sidebar mobile -->
      <nav id="menu-sidebar" class="menu-sidebar">
        <button id="menu-close" class="menu-close">&times;</button>
        <a href="HomeAluno.html" class="sidebar-link">Home</a>
        <a href="ItinerarioAluno.html" class="sidebar-link">Itinerário</a>
        <a href="AtividadesAluno.html" class="sidebar-link">Atividades</a>
        <a href="NotasAluno.html" class="sidebar-link">Notas</a>
        <a href="MensagensAluno.html" class="sidebar-link active">Mensagens</a>
        <a href="eventosAlunos.html" class="sidebar-link">Eventos</a>
      </nav>
    </header>

    <!-- LAYOUT -->
    <div class="page-wrap">
      <!-- SIDEBAR -->
      <aside id="sidebar" class="sidebar">
        <h2 class="sidebar-title">Conversas</h2>

        <div class="sidebar-section">
          <h3 class="section-title">Mural da Turma</h3>
          <ul id="mural-list" class="mural-list"></ul>
        </div>

        <div class="sidebar-section">
          <h3 class="section-title">Professores</h3>
          <ul id="prof-list" class="alunos-list"></ul>
        </div>
      </aside>

      <!-- CHAT -->
      <main class="chat-main">
        <header class="chat-header">
          <div class="chat-header-left">
            <button id="chat-menu-toggle" class="btn-menu">☰</button>
            <h2 id="chat-title">Selecione uma conversa</h2>
          </div>

          <button id="btnRefresh" class="btn-refresh">⟳</button>
        </header>

        <section id="chat-mensagens" class="chat-mensagens">
          <div id="placeholder" class="chat-placeholder">
            Selecione uma conversa
          </div>
        </section>

        <div class="chat-footer">
          <form id="sendForm" class="input-wrap" onsubmit="return false;">
            <input id="chatInput" type="text" placeholder="Digite..." />
            <button id="btnSend" class="btn-send" type="button">➤</button>
          </form>
        </div>
      </main>
    </div>

    <footer>
      <p>© Projeto desenvolvido por:  Fernando Engi, Omar Saliba, Andrey Salomão, Bernardo Putini e Arthur Uchoa. </p>
    </footer>

    <!-- Scripts -->
    <script src="front/Scripts/MensagensAluno.js"></script>
    <script src="front/Scripts/header.js"></script>

    <!-- Sidebar mobile -->
    <script>
      const menuToggle = document.getElementById("menu-toggle");
      const menuSidebar = document.getElementById("menu-sidebar");
      const menuClose = document.getElementById("menu-close");

      menuToggle.addEventListener("click", () => {
        menuSidebar.classList.add("open");
      });

      menuClose.addEventListener("click", () => {
        menuSidebar.classList.remove("open");
      });

      window.addEventListener("click", (e) => {
        if (
          menuSidebar.classList.contains("open") &&
          !menuSidebar.contains(e.target) &&
          !menuToggle.contains(e.target)
        ) {
          menuSidebar.classList.remove("open");
        }
      });
    </script>
  </body>
</html>

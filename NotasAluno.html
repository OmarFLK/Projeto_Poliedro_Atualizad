<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Notas do Aluno</title>

    <link rel="stylesheet" href="front/Styles/NotasAluno.css" />
    <link rel="stylesheet" href="front/Styles/StyleAlunos.css" />
    <link rel="stylesheet" href="front/Styles/Login.css" />
    <link rel="icon" type="image/x-icon" href="Assets/favicon.ico">    

    <style>
      :root {
        --header-h: 64px;
        --footer-h: 56px;
        --blue: #163f7a;
        --anim-ease: cubic-bezier(0.22, 0.9, 0.32, 1);
      }

      html,
      body {
        height: 100%;
        margin: 0;
        padding: 0;
        background: #f4f6f9;
        box-sizing: border-box;
        font-family: Inter, system-ui, Roboto, Arial, sans-serif;
        -webkit-font-smoothing: antialiased;
      }
      *,
      *::before,
      *::after {
        box-sizing: inherit;
      }

      body {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
      }

      header {
        z-index: 120;
      }

      main.container {
        flex: 1 1 auto;
        min-height: calc(100vh - var(--header-h) - var(--footer-h));
        padding: 18px;
        max-width: 1200px;
        margin: 8px auto;
        width: 100%;
        box-sizing: border-box;
      }

      /* HEADER */
      .header-aluno {
        background-color: var(--blue);
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 10px 20px;
        height: var(--header-h);
        transition: opacity 0.28s var(--anim-ease),
          backdrop-filter 0.28s var(--anim-ease);
        color: #fff;
      }
      .header-aluno.scrolled {
        opacity: 0.78;
        backdrop-filter: blur(2px);
      }
      .poliedro-logo-header {
        height: 40px;
        cursor: pointer;
      }
      .header-profile-img {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        border: 2px solid #fff;
        object-fit: cover;
      }

      .menu-toggle {
        font-size: 1.4rem;
        background: none;
        border: none;
        color: #fff;
        cursor: pointer;
        display: none;
      }
      @media (max-width: 991px) {
        .menu-toggle {
          display: inline-block;
        }
        .header-nav {
          display: none !important;
        }
      }

      /* SIDEBAR */
      .sidebar {
        height: 100%;
        width: 0;
        position: fixed;
        top: 0;
        left: 0;
        background-color: #1a4e9b;
        overflow-x: hidden;
        padding-top: 60px;
        transition: width 0.28s var(--anim-ease);
        z-index: 1400;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }
      .sidebar.open {
        width: 250px;
      }
      .sidebar-link {
        color: #fff;
        padding: 12px 20px;
        text-decoration: none;
        display: block;
        font-size: 1.05rem;
      }
      .sidebar-link.active,
      .sidebar-link:hover {
        background: #6a9bd1;
      }

      .menu-close {
        position: absolute;
        top: 10px;
        right: 18px;
        background: none;
        border: none;
        color: #fff;
        font-size: 2rem;
        cursor: pointer;
      }

      /* NOTAS CONTENT */
      .notas-box {
        display: grid;
        grid-template-columns: 1fr;
        gap: 20px;
      }

      .semester-card {
        background: #fff;
        border-radius: 12px;
        padding: 16px;
        box-shadow: 0 10px 28px rgba(2, 6, 23, 0.06);
        opacity: 0;
        transform: translateY(16px);
        transition: opacity 0.56s var(--anim-ease),
          transform 0.56s var(--anim-ease);
      }
      .semester-card.in-view {
        opacity: 1;
        transform: translateY(0);
      }

      .semester-card h3 {
        margin: 0 0 8px;
        color: var(--blue);
      }

      .charts {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 16px;
      }
      @media (max-width: 800px) {
        .charts {
          grid-template-columns: 1fr;
        }
      }

      .chart-card {
        background: #fff;
        border-radius: 12px;
        padding: 12px;
        box-shadow: 0 10px 28px rgba(2, 6, 23, 0.06);
        opacity: 0;
        transform: translateY(16px);
        transition: opacity 0.56s var(--anim-ease),
          transform 0.56s var(--anim-ease);
      }
      .chart-card.in-view {
        opacity: 1;
        transform: translateY(0);
      }

      /* IMPORTANT: fix height for canvas to avoid infinite grow */
      .chart-card canvas {
        display: block;
        width: 100% !important;
        height: 140px !important; /* fixed height */
      }
      /* also ensure card has min height so layout is stable */
      .chart-card {
        min-height: 160px;
      }

      .empty-note {
        color: #666;
        padding: 12px 0;
        text-align: center;
      }

      footer {
        background: var(--blue);
        color: #fff;
        text-align: center;
        padding: 12px 0;
        flex-shrink: 0;
      }

      @media (prefers-reduced-motion: reduce) {
        .semester-card,
        .chart-card {
          transition: none !important;
          transform: none !important;
          opacity: 1 !important;
        }
      }
    </style>
  </head>

  <body>
    <!-- HEADER -->
    <header>
      <div class="header-aluno" id="site-header">
        <img
          src="Assets/poliedro.png"
          class="poliedro-logo-header"
          alt="Poliedro"
        />

        <button id="menu-toggle" class="menu-toggle" aria-label="Abrir menu">
          ☰
        </button>

        <nav class="header-nav" aria-label="Navegação principal">
          <a href="HomeAluno.html" class="header-link">Home</a>
          <a href="ItinerarioAluno.html" class="header-link">Itinerário</a>
          <a href="AtividadesAluno.html" class="header-link">Atividades</a>
          <a href="NotasAluno.html" class="header-link active">Notas</a>
          <a href="MensagensAluno.html" class="header-link">Mensagens</a>
          <a href="eventosAlunos.html" class="header-link">Eventos</a>
        </nav>

        <a href="PerfilAluno.html" aria-label="Meu perfil">
          <img
            src="Assets/LogoUsuario.png"
            class="header-profile-img"
            alt="Perfil"
          />
        </a>
      </div>

      <nav id="sidebar" class="sidebar" aria-label="Menu lateral">
        <button id="menu-close" class="menu-close" aria-label="Fechar menu">
          &times;
        </button>
        <a href="HomeAluno.html" class="sidebar-link">Home</a>
        <a href="ItinerarioAluno.html" class="sidebar-link">Itinerário</a>
        <a href="AtividadesAluno.html" class="sidebar-link">Atividades</a>
        <a href="NotasAluno.html" class="sidebar-link active">Notas</a>
        <a href="MensagensAluno.html" class="sidebar-link">Mensagens</a>
        <a href="eventosAlunos.html" class="sidebar-link">Eventos</a>
      </nav>
    </header>

    <!-- MAIN -->
    <main class="container" role="main" id="main">
      <div class="notas-box" id="notas-box">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 6px;
          "
        >
          <div>
            <h1 style="margin: 0; color: #163f7a; font-size: 1.6rem">
              Minhas Notas
            </h1>
            <div style="color: #666">
              Visualize suas notas por semestre — apenas você tem acesso.
            </div>
          </div>
        </div>

        <div id="semestre1" class="semester-card" aria-labelledby="sem1-title">
          <h3 id="sem1-title">1º Semestre</h3>
          <div id="tabelaSem1">Carregando...</div>
        </div>

        <div id="semestre2" class="semester-card" aria-labelledby="sem2-title">
          <h3 id="sem2-title">2º Semestre</h3>
          <div id="tabelaSem2">Carregando...</div>
        </div>

        <div class="charts" aria-live="polite">
          <div class="chart-card" id="chart-wrap-1" aria-hidden="false">
            <h4 style="margin: 0 0 8px">Gráfico — 1º Semestre</h4>
            <canvas
              id="chartSem1"
              aria-label="Gráfico do primeiro semestre"
            ></canvas>
          </div>
          <div class="chart-card" id="chart-wrap-2" aria-hidden="false">
            <h4 style="margin: 0 0 8px">Gráfico — 2º Semestre</h4>
            <canvas
              id="chartSem2"
              aria-label="Gráfico do segundo semestre"
            ></canvas>
          </div>
        </div>
      </div>
    </main>

    <footer>
      <p class="footer-text">© Projeto desenvolvido por:  Fernando Engi, Omar Saliba, Andrey Salomão, Bernardo Putini e Arthur Uchoa. </p>
    </footer>
   <!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Seu script de notas (único responsável pelos gráficos) -->
<script src="front/Scripts/notas.aluno.js" defer></script>

<!-- Header / menu -->
<script src="front/Scripts/header.js" defer></script>

<script>
(function () {
  const sem1 = document.getElementById("semestre1");
  const sem2 = document.getElementById("semestre2");
  const wrap1 = document.getElementById("chart-wrap-1");
  const wrap2 = document.getElementById("chart-wrap-2");

  function observe(targets, cb) {
    if (!("IntersectionObserver" in window)) {
      targets.forEach(t => t && cb(t));
      return;
    }

    const io = new IntersectionObserver((entries, obs) => {
      entries.forEach(ent => {
        if (ent.isIntersecting) {
          cb(ent.target);
          obs.unobserve(ent.target);
        }
      });
    }, { threshold: 0.1 });

    targets.forEach(t => t && io.observe(t));
  }

  // animação dos cards
  observe([sem1, sem2], el => el.classList.add("in-view"));

  // apenas anima o card – quem cria o gráfico é o notas.aluno.js
  observe([wrap1, wrap2], el => {
    el.classList.add("in-view");
  });
})();
</script>



  </body>
</html>
